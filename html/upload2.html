<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>
	<form id= "upload_form">  
	  上传文件：<input type="file" name="image" id="uploadFile"/>
		<input type="text" name="abnormal" value="8d1bc6e56e4a6b9e9425f82343b78b66" />
		<input type="text" name="id" value="310" />
	    <input type="button" value="上传" />
	    <div id="name"></div>
	</form>
	<script src="__PUBLIC__/js/jquery-2.2.3.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript">	
		function upload(){
		    var form = new FormData($("#upload_form")[0]);
		    $.ajax({
		      url:'https://www.coucouchina.com/api/personal/signature',
		      type:'POST',
		      async: true,
		      data:form,
	          processData: false,
			  contentType: false,
		      success:function (e){
		      	var data = e.datas;
		        $('#name').append("<img src="+data.savePath+" />")
		      },
		      error:function (e){
		        alert('失败');
		      }
		   });
		}
		$('input[type=button]').click(function(){
			upload()
		})
		$.ajax({
	      url:'https://www.coucouchina.com/api/personal/aaa',
	      type:'POST',
	      async: true,
	      data:{id:310},
	      success:function (e){
	      	var data = e.data;
	         $('#name').append("<img src="+data.signature+" />")
	      },
	      error:function (e){
	        alert('失败');
	      }
	   });


	</script>
</body>
</html>
<!-- <!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<body>
	<form id="formFile">
		<input id="file_upload" type="file" />
		<input type="text" name="id" value="310">
		<input type="text" name="token" value="coucou">
		<input type='text' name="abnormal" value="8d1bc6e56e4a6b9e9425f82343b78b66">
		<button>上传</button>
	</form>
		
		<script src="__PUBLIC__/js/jquery-2.2.3.js" type="text/javascript" charset="utf-8"></script>
		<script>
			// $(function() {
			// 	var image='';
			// 	$('#file_upload').change(function(){
			// 		image=this.files[0].name;
			// 		console.log(image)
			// 	})
				
			// 	$('button').click(function(){console.log(image)
			// 		$.ajax({
			// 			type: "post",
			// 	        url: "https://www.coucouchina.com/api/personal/signature",
			// 	        async: true,
			// 	        data: {
			// 	        	id:310,
			// 	        	token:'coucou',
			// 	        	abnormal:'8d1bc6e56e4a6b9e9425f82343b78b66',
			// 	        	image:image
			// 	        },
			// 	        success: function (e) {

			// 	        }
			// 		})
			// 	})
				function save() {
					$('#formFile').attr("action","https://www.coucouchina.com/api/personal/signature");
					var form = new FormData(document.getElementById("formFile"));
					$.ajax({
						url: "https://www.coucouchina.com/api/personal/signature",
						type: "post",
						data: form,
						cache: false,
						processData: false,
						contentType: false,
						success: function(data) {
							const obj = JSON.parse(data);
							console.log(data)
						},
						error: function(e) {
							alert("网络错误，请重试！！");
						}
					});
				}
				$('button').click(function(){
					save()
				})
					// $("#file_upload").change(function() {
					// 	var $file = $(this);
					// 	var fileObj = $file[0];
					// 	var windowURL = window.URL || window.webkitURL;
					// 	var dataURL;
					// 	var $img = $("#preview");
						 
					// 	if(fileObj && fileObj.files && fileObj.files[0]){
					// 		dataURL = windowURL.createObjectURL(fileObj.files[0]);
					// 		$img.attr('src',dataURL);
					// 	}else{
					// 		dataURL = $file.val();
					// 		var imgObj = document.getElementById("preview");
					// 		// 两个坑:
					// 		// 1、在设置filter属性时，元素必须已经存在在DOM树中，动态创建的Node，也需要在设置属性前加入到DOM中，先设置属性在加入，无效；
					// 		// 2、src属性需要像下面的方式添加，上面的两种方式添加，无效；
					// 		imgObj.style.filter = "progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale)";
					// 		imgObj.filters.item("DXImageTransform.Microsoft.AlphaImageLoader").src = dataURL;
							 
					// 	}
					// });
			// });
		</script>
	</body>
</html> -->


<!-- 
 <!DOCTYPE html>
 <html>
 <head>
 	<title>
 		
 	</title>
 </head>
 <body>
 <form name="form" action="https://www.coucouchina.com/api/personal/signature" enctype="multipart/form-data" method="post">
 	 <input type="file" name="image" >
 	 <input type="submit" value="上传">

 </form>
 </body>
 </html> -->